FROM node:14-alpine3.12
# setup
WORKDIR /app
COPY . /app
RUN yarn build
EXPOSE 3000

# ARGS
ARG DATABASE_HOST=localhost
ENV DATABASE_HOST=${DATABASE_HOST}
ARG DATABASE_PORT=5432
ENV DATABASE_PORT=${DATABASE_PORT}
ARG POSTGRES_USER
ENV POSTGRES_USER=${POSTGRES_USER}
ARG POSTGRES_PASSWORD
ENV POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
ARG POSTGRES_DB
ENV POSTGRES_DB=${POSTGRES_DB}
#JWT
ARG JWT_SECRET=xxx
ENV JWT_SECRET=${JWT_SECRET}


ARG FRONTEND_URL
ENV FRONTEND_URL=${FRONTEND_URL}
ARG MAIL_HOST
ENV MAIL_HOST=${MAIL_HOST}
ARG MAIL_PORT
ENV MAIL_PORT=${MAIL_PORT}
ARG MAIL_USER
ENV MAIL_USER=${MAIL_USER}
ARG MAIL_PASS
ENV MAIL_PASS=${MAIL_PASS}

ENV NODE_ENV=production


CMD ["node", "dist/main.js"]
